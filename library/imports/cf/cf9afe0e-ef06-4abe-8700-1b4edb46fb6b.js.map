{"version":3,"sources":["assets/UISuperScrollView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import UISuperLayout from './UISuperLayout';\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport default class UISpuerScrollView extends cc.ScrollView {\n    @property({\n        displayName: \"顶部偏移量\",\n        tooltip: \"下拉时超过此偏移会发送下拉事件\"\n    }) headerOutOffset: number = 200\n    @property({\n        displayName: \"顶部高度\",\n        tooltip: \"当下拉事件触发时 顶部追加的高度\"\n    }) headerHeight: number = 100\n\n    @property({\n        displayName: \"底部偏移量\",\n        tooltip: \"上拉时超过此偏移会发送上拉事件\"\n    }) footerOutOffset: number = 200\n\n    @property({\n        displayName: \"底部高度\",\n        tooltip: \"当上拉事件触发时 底部追加的高度\"\n    }) footerHeight: number = 100\n    @property({\n        type: cc.Component.EventHandler,\n        displayName: \"下拉事件\"\n    }) pullDownEvents: cc.Component.EventHandler[] = []\n    @property({\n        type: cc.Component.EventHandler,\n        displayName: \"上拉事件\"\n    }) pullUpEvents: cc.Component.EventHandler[] = []\n\n    public deltaMove = cc.Vec2.ZERO\n    public get view(): cc.Node { return this['_view'] }\n    public set autoScrolling(value: boolean) { this['_autoScrolling'] = value }\n    public get autoScrolling() { return this['_autoScrolling'] }\n    private isMoveHeader: boolean = false\n    private isMoveFooter: boolean = false\n    private isLockHeader: boolean = false\n    private isLockFooter: boolean = false\n    private isAutoBack: boolean\n    private _layout: UISuperLayout = null\n    private get layout(): UISuperLayout {\n        if (this._layout == null) {\n            this._layout = this.content.getComponent(UISuperLayout)\n        }\n        return this._layout\n    }\n    private get isHeader() {\n        return this.layout?.header && this.layout?.header['index'] == 0 || false\n    }\n    private get isFooter() {\n        return this.layout?.footer && this.layout?.footer['index'] == this.layout?.maxItemTotal - 1 || false\n    }\n    /** 是否需要计算？如果上拉/下拉事件没有监听者则不需要相关的计算 */\n    private get isCalculPull() {\n        return this.pullDownEvents.length > 0 || this.pullUpEvents.length > 0\n    }\n    public calculateBoundary() {\n        this['_calculateBoundary']()\n    }\n    public getHowMuchOutOfBoundary(offset?: cc.Vec2) {\n        return this['_getHowMuchOutOfBoundary'](offset)\n    }\n    public release() {\n        if (this.isLockHeader || this.isLockFooter) {\n            this.isMoveHeader = false\n            this.isMoveFooter = false\n            this.isLockHeader = false\n            this.isLockFooter = false\n            this['_outOfBoundaryAmountDirty'] = true\n            this['_processInertiaScroll']()\n        }\n    }\n    private _onTouchMoved(event: cc.Event.EventTouch, captureListeners) {\n        super['_onTouchMoved'](event, captureListeners)\n        let delta = cc.v2(event.getLocation().x - event.getPreviousLocation().x, event.getLocation().y - event.getPreviousLocation().y)\n        if (this.vertical && delta.y != 0 || this.horizontal && delta.x != 0) {\n            this.deltaMove = delta\n        }\n        this.isAutoBack = false\n        // 判断是否需要计算\n        if (this.isCalculPull) {\n            let outOfBoundary = this.getHowMuchOutOfBoundary()\n            let offset = this.vertical ? outOfBoundary.y : -outOfBoundary.x\n            if (offset > 0 && this.isHeader) {\n                this.isMoveHeader = offset >= this.headerOutOffset\n            } else if (offset < 0 && this.isFooter) {\n                this.isMoveFooter = offset <= -this.footerOutOffset\n            }\n        }\n\n    }\n    private _dispatchEvent(event) {\n        super['_dispatchEvent'](event)\n        if (event == 'scroll-ended') {\n            this.deltaMove = cc.Vec2.ZERO\n            this.isMoveHeader = false\n            this.isMoveFooter = false\n            this.isAutoBack = false\n        }\n    }\n    private _getContentTopBoundary() {\n        let offset = 0\n        if (this.layout?.header) {\n            let local\n            if (this.layout.childBoundingBox) {\n                local = this.view.convertToNodeSpaceAR(cc.v2(0, this.layout.header.getBoundingBoxToWorld().yMax))\n            } else {\n                local = this.view.convertToNodeSpaceAR(cc.v2(0, this.layout.header['getBounding']().yMax))\n            }\n            offset = local.y + this.layout.paddingTop\n            if (this.isHeader && this.isLockHeader) {\n                offset += this.headerHeight\n            }\n\n        }\n        return offset;\n    }\n    private _getContentBottomBoundary() {\n        let offset = 0\n        if (this.layout?.footer) {\n            let local\n            if (this.layout.childBoundingBox) {\n                local = this.view.convertToNodeSpaceAR(cc.v2(0, this.layout.footer.getBoundingBoxToWorld().yMin))\n            } else {\n                local = this.view.convertToNodeSpaceAR(cc.v2(0, this.layout.footer['getBounding']().yMin))\n            }\n            offset = local.y - this.layout.paddingBottom\n            if (this.isFooter && this.isLockFooter) {\n                offset -= this.footerHeight\n            }\n        }\n        return offset\n    }\n    private _getContentLeftBoundary() {\n        let offset = 0\n        if (this.layout?.header) {\n            let local\n            if (this.layout.childBoundingBox) {\n                local = this.view.convertToNodeSpaceAR(cc.v2(this.layout.header.getBoundingBoxToWorld().xMin, 0))\n            } else {\n                local = this.view.convertToNodeSpaceAR(cc.v2(this.layout.header['getBounding']().xMin, 0))\n            }\n            offset = local.x - this.layout.paddingLeft\n            if (this.isHeader && this.isLockHeader) {\n                offset -= this.headerHeight\n            }\n        }\n        return offset\n    }\n    private _getContentRightBoundary() {\n        let offset = 0\n        if (this.layout?.footer) {\n            let local\n            if (this.layout.childBoundingBox) {\n                local = this.view.convertToNodeSpaceAR(cc.v2(this.layout.footer.getBoundingBoxToWorld().xMax, 0))\n            } else {\n                local = this.view.convertToNodeSpaceAR(cc.v2(this.layout.footer['getBounding']().xMax, 0))\n            }\n            offset = local.x + this.layout.paddingRight\n            if (this.isFooter && this.isLockFooter) {\n                offset += this.footerHeight\n            }\n        }\n        return offset\n    }\n\n    private _startAutoScroll(deltaMove, timeInSecond, attenuated) {\n        if (this.isCalculPull) {\n            if (this.isMoveHeader && !this.isLockHeader) {\n                this.isLockHeader = true\n\n                this.vertical && (deltaMove.y -= this.headerHeight)\n                this.horizontal && (deltaMove.x += this.headerHeight)\n\n                cc.Component.EventHandler.emitEvents(this.pullDownEvents, this, {\n                    refresh: true,\n                    progress: 1\n                })\n            }\n            if (this.isMoveFooter && !this.isLockFooter) {\n                this.isLockFooter = true\n\n                this.vertical && (deltaMove.y += this.footerHeight)\n                this.horizontal && (deltaMove.x -= this.footerHeight)\n\n                cc.Component.EventHandler.emitEvents(this.pullUpEvents, this, {\n                    refresh: true,\n                    progress: 1\n                })\n            }\n        }\n        super['_startAutoScroll'](deltaMove, timeInSecond, attenuated)\n    }\n    private _isNecessaryAutoScrollBrake() {\n        let result = super['_isNecessaryAutoScrollBrake']()\n        if (result) {\n            this.isAutoBack = true\n        }\n        return result\n    }\n    private _updateScrollBar(outOfBoundary) {\n        super['_updateScrollBar'](outOfBoundary)\n        if (!this.isCalculPull) return\n        // 自动回弹时不发送事件 只有在手动滑动时才触发\n        if (this['_autoScrollBraking']) {\n            this.emitPullDownEvent({ refresh: false, progress: 0 })\n            this.emitPullUpEvent({ refresh: false, progress: 0 })\n            this.isAutoBack = true\n        }\n        if (this.isAutoBack) return\n\n        let offset = this.vertical ? outOfBoundary.y : -outOfBoundary.x\n        if (offset > 0 && this.isHeader && !this.isLockHeader) {\n\n            let progress = Math.min(offset / this.headerOutOffset, 1)\n\n            this.emitPullDownEvent({ refresh: false, progress: progress })\n\n        } else if (offset < 0 && this.isFooter && !this.isLockFooter) {\n\n            let progress = Math.min(-offset / this.footerOutOffset, 1)\n\n            this.emitPullUpEvent({ refresh: false, progress: progress })\n\n        } else {\n            this.emitPullDownEvent({ refresh: false, progress: 0 })\n\n            this.emitPullUpEvent({ refresh: false, progress: 0 })\n        }\n    }\n\n    private emitPullDownEvent(data: any) {\n        cc.Component.EventHandler.emitEvents(this.pullDownEvents, this, data)\n    }\n    private emitPullUpEvent(data: any) {\n        cc.Component.EventHandler.emitEvents(this.pullUpEvents, this, data)\n    }\n}\n"]}